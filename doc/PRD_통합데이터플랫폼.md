# PRD: 서울아산병원 통합 데이터 플랫폼 (IDP)

## 문서 정보
- **버전**: 1.0
- **작성일**: 2026-02-01
- **프로젝트명**: 통합 데이터 플랫폼 구축
- **사업기간**: 계약 후 18개월

---

## 1. 개요

### 1.1 배경
서울아산병원은 국내 최대 의료기관으로 방대한 규모의 의료 데이터를 보유하고 있으나, 현재 CDW(Clinical Data Warehouse)와 EDW(Enterprise Data Warehouse)가 분리 운영되어 데이터 사일로 현상이 발생하고 있다. 또한 데이터 접근성 저하, 비효율적인 수작업 SR 기반 데이터 추출 프로세스, 레거시 인프라 한계 등의 문제가 있다.

### 1.2 목표
- 데이터 레이크하우스 아키텍처 기반 통합 데이터 플랫폼 구축
- CDW/EDW 통합 및 Self-Service 데이터 분석 환경 제공
- AI 기반 지능형 데이터 서비스 및 MCP 환경 구축
- 통합 데이터 거버넌스 체계 확립

### 1.3 핵심 지표 (KPI)
| 지표 | 현재 | 목표 |
|------|------|------|
| 데이터 추출 소요시간 | 수일~수주 | 수분~수시간 |
| Self-Service 사용률 | 0% | 70% |
| 데이터 표준화율 | - | 90% |
| API 기반 연동 시스템 수 | - | 10+ |

---

## 2. 시스템 아키텍처

### 2.1 전체 구성도

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         데이터 포털 (Data Portal)                         │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐    │
│  │ 데이터 카탈로그 │ │ 시각화/BI    │ │ 분석 환경    │ │ AI Assistant │    │
│  └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘    │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
┌─────────────────────────────────────────────────────────────────────────┐
│                      데이터 거버넌스 (Governance)                         │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐      │
│  │ 표준 관리 │ │ 메타데이터│ │ 품질 관리 │ │ 보안/권한 │ │ 비식별화  │      │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘ └──────────┘      │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
┌─────────────────────────────────────────────────────────────────────────┐
│                    데이터 레이크하우스 (Lakehouse)                        │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │ Query Engine (DuckDB/Trino)  │  OLAP Layer  │  Semantic Layer      │  │
│  └───────────────────────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────────────────────┐  │
│  │        Object Storage (Iceberg/Delta Lake)  - 2PB 규모             │  │
│  │    ┌──────────┐    ┌──────────┐    ┌──────────┐                   │  │
│  │    │ Bronze   │ -> │ Silver   │ -> │ Gold     │                   │  │
│  │    │ (Raw)    │    │ (정제)    │    │ (마트)   │                   │  │
│  │    └──────────┘    └──────────┘    └──────────┘                   │  │
│  └───────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
┌─────────────────────────────────────────────────────────────────────────┐
│                       데이터 파이프라인 (Pipeline)                        │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐    │
│  │ CDC (Debezium)│ │ ETL (Airflow)│ │ 스트리밍     │ │ 비정형 처리  │    │
│  └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘    │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
┌─────────────────────────────────────────────────────────────────────────┐
│                          원천 시스템 (Source)                            │
│  ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐     │
│  │ EMR    │ │ PACS   │ │ LIS    │ │ OCS    │ │ ERP    │ │ 기타   │     │
│  └────────┘ └────────┘ └────────┘ └────────┘ └────────┘ └────────┘     │
└─────────────────────────────────────────────────────────────────────────┘
```

### 2.2 기술 스택

| 레이어 | 기술 | 용도 |
|--------|------|------|
| 스토리지 | Apache Iceberg / Delta Lake | 오픈 테이블 포맷 |
| 쿼리 엔진 | DuckDB, Trino | OLAP 쿼리 처리 |
| ETL/ELT | Apache Airflow | 파이프라인 오케스트레이션 |
| CDC | Debezium | 변경 데이터 캡처 |
| 벡터DB | Qdrant | RAG/임베딩 저장 |
| ML 추적 | MLflow | 모델 버전 관리 |
| BI | Apache Superset | 시각화/대시보드 |
| 분석 환경 | JupyterLab | 노트북 기반 분석 |
| API Gateway | Kong / FastAPI | API 관리 |
| AI/LLM | Multi-LLM (GPT-4, Claude) | AI 서비스 |
| MCP | Model Context Protocol | AI 에이전트 연동 |

---

## 3. 기능 요구사항

### 3.1 시스템 기능 요구사항 (SFR)

#### SFR-001: 공통 요구사항
- 목표 시스템 구성에 대한 세부 방안 제시
- 비정형 데이터를 고려한 ODS/DW/DM 설계
- Web 기반 포털 시스템 구축
- 확장성 보장 (대량분석, 데이터 급증, IoT 실시간 분석 대응)

#### SFR-002: 분석 데이터마트 설계 및 구축
- CDW/EDW 통합 모델 기반 일원화된 분석 서비스
- 운영계 시스템과의 데이터 정합성 확보
- OLAP 지원 시스템 구성
- Fact/Dimension 테이블 최적 분할 구성
- 서울아산병원 데이터 표준화 규정 준수

#### SFR-003: ETL 개발
- ETL 솔루션 기반 기능 구현
- 병목 현상 식별 및 최적화
- 준 실시간 데이터 처리 (30분 간격)
- 다양한 이기종 소스 지원
- GUI 환경 ETL 개발
- 스케줄링 및 자동 실행, 모니터링

#### SFR-004: 데이터 분석 환경 제공
- 웹 기반 데이터 분석 도구 (JupyterLab, R)
- 다양한 분석 스크립트 언어/버전 지원
- 프로젝트별 자원 관리 및 모니터링
- 분석 작업 공유 및 결과 활용

#### SFR-005: 분석 플랫폼 구축
- 통합 데이터 플랫폼 데이터셋 활용 가상 연구 환경
- 온프레미스 클라우드 시스템 구성

---

### 3.2 데이터 취득 요구사항 (DIR)

#### DIR-001: 데이터 취득 방식 일관성 유지
- 실시간 스트림, 배치 프로세스 지원
- 취득 절차/기준 통제 관리 도구
- 테이블 간 종속 관계 파악
- 오류 발생 시 Alert 기능 (아산웍스 연동)

#### DIR-002: 통일된 데이터 취득 기술 확보
- 이기종 DB, 파일 형태 관계없이 동일 기술 기반 작업
- 다양한 데이터 포맷 취득 작업 자동 생성/템플릿
- Native 커넥터 다수 보유 (RDBMS, NoSQL, 클라우드 등)
- MDX, JSON, XML, HL7 FHIR 등 의료 특화 포맷 필수 지원
- 원천 시스템 메타데이터 자동 동기화

#### DIR-003: 원천데이터 변화 대응
- 스키마 변경 탐지 및 자동 처리
- 변경 사항 Logging/Monitoring
- 실시간 스트리밍 ↔ 배치 프로세스 전환

#### DIR-004: 데이터 Pipeline 구축
- 신규 마트 설계 반영 Pipeline
- CDM, PMS, REDCap 등 유관 시스템 이관용 Pipeline
- Landing Zone 취득 템플릿 기반 자동화

#### DIR-005: 변경 데이터 캡처 (CDC)
- 트랜잭션 로그 기반 실시간 캡처 (INSERT/UPDATE/DELETE)
- PostgreSQL, MySQL, SQL Server, Oracle, MongoDB 커넥터
- Iceberg 등 테이블 형식 연계
- 오프셋 기반 작업 재개

---

### 3.3 데이터 거버넌스 요구사항 (DGR)

#### DGR-001: 데이터 표준 관리
- 다양한 원천 시스템 데이터 용어/값/코드 통합 표준화
- AMIS 3.0 표준 메타 시스템 연계
- 시스템/화면 표준 용어 독립 관리
- 용어 분류체계, 표준 지표 정의

#### DGR-002: 메타데이터 관리 체계
- 데이터 매핑, 작업 조건/검증/오류 기준 관리
- 데이터 정의/스키마 변경 워크플로우
- 데이터 처리 규정 준수 모니터링
- Biz 메타데이터 적용 Pipeline Job 현황

#### DGR-003: 데이터 카탈로그
- 데이터 정의/생성/소유권/공유 관리 프로세스
- 표준 메타 + Biz 메타 집약 카탈로그 생성
- 데이터 오너쉽 정의 및 공유 대상 관리
- API, XML, JSON, SQL, View 등 카탈로그 제공

#### DGR-004: 데이터 품질관리
- 상시 품질관리 자동화 시스템
- 적재 시 자동 품질 검증 (필수 컬럼, 타입, 범위, 중복, NULL)
- 오류 발생 시 담당자 자동 통보
- 품질 검증 규칙 선언적 정의

#### DGR-005: 데이터 보안관리
- 데이터 보안과 사용 권한 명확 분리
- 테이블/컬럼 단위 보안 관리
- Row-level, Column-level, Cell-level 3단계 보안
- 컨텍스트(시간, 위치, 목적) 기반 접근 권한

#### DGR-006: 데이터 비식별 처리
- 취득 과정, Pipeline 각 단계, 포털 서비스 비식별/재식별 적용
- 비식별/재식별 처리 모니터링

#### DGR-007: 데이터 권한 관리
- 역할 기반 권한 부여 (RBAC)
- AMIS 3.0 EAM 역할 연계
- 테이블/컬럼/로우별 권한 통제
- 재식별 권한 등 특수 권한 역할 정의

#### DGR-008: 데이터 복구 방안
- 대량 데이터 복구 관리
- 보안 사고 시 데이터 복구 절차

#### DGR-009: 지능형 거버넌스 자동화
- 쿼리 패턴 분석 기반 자동 인덱싱/파티셔닝
- 자주 사용 조인 패턴 자동 캐싱
- 피크 시간대 예측 및 리소스 사전 할당
- 데이터 품질 이상 자동 감지/알림
- 메타데이터 변경 영향도 자동 분석

---

### 3.4 데이터 포털 요구사항 (DPR)

#### DPR-001: 포털 UI/UX 설계
- 메인화면: CDW/EDW 통합 레이크하우스 대시보드
- 우측 AI Assistant Side-bar (호출/접기 가능)
- 자연어 데이터 검색, 필터링, 쿼리 생성 요청
- 대화 내용 타임라인 기록 및 상태 복원
- 데이터 관계 시각화 (Tree/Graph View)
- 통합 검색창 (자동완성, 오타 보정)
- AI 요약 답변 + Raw-data/연관 데이터 리스트
- Faceted Search (다차원 필터링)
- 데이터 미리보기 (스키마, 샘플 데이터, 썸네일)
- 스냅샷/레시피 기반 데이터 재현성 확보
- Python/R 즉시 로딩 코드 제공
- Community 탭 (Q&A, 이슈 트래킹)

#### DPR-002: 지능형 데이터 카탈로그 및 탐색
- 메타데이터 기반 통합 검색
- 연관 데이터셋 자동 추천
- Data Lineage 시각화
- Semantic Layer 적용
- 드래그 앤 드롭 데이터 조합
- 마스터 분석 모델 등록/공유
- 사용 이력 기반 추천 알고리즘

#### DPR-003: 임상/연구 특화 고급 데이터 추출
- GUI 기반 집합 연산 (교집합, 차집합, 여집합)
- Venn Diagram 시각화
- Index Date 기준 전후 이벤트 결합 로직
- 코호트 필터링 시각화 (CONSORT Diagram)
- 단계별 잔존/탈락 환자 수 실시간 계산
- Drill-down 환자 리스트 조회
- Chart Review (시계열/이벤트 중심 진료기록)

#### DPR-004: 셀프서비스 시각화 및 BI
- 다양한 원천/파일 직접 연동 및 Data Blending
- No-Code 차트 생성 (Drill-down/up, Cross-filter)
- SQL Editor 내장
- 원본 데이터 역추적 검증
- 정형 리포트 생성, Excel 웹 리포트 변환
- 비동기 쿼리, 결과 캐싱
- PDF, Excel, PPT, HWP 보고서 변환

#### DPR-005: 포털 운영 관리 및 거버넌스
- 사용자 권한 관리 (연구자, 행정, 관리자)
- 조회/미리보기/다운로드 권한 차등 부여
- 데이터셋 공유 설정 (개인/그룹/전체)
- 접근 로그 및 버전 관리

---

### 3.5 AI 적용 요구사항 (AAR)

#### AAR-001: AI 기반 지능형 서비스
- **Text2SQL**: 자연어 → SQL 자동 생성
- **RAG**: 비정형 데이터 검색 및 답변 생성
- **AI Assistant**: 데이터 탐색/설정 보조
  - 운영자용 AI: 시스템 관리, 모니터링 지원
  - 포털 서비스용 AI: 사용자 데이터 활용 지원

#### AAR-002: AI 인프라 및 아키텍처
- **MCP 환경 구축**: Model Context Protocol 기반 AI 에이전트 연동
- **Multi-LLM 환경**: GPT-4, Claude 등 다중 LLM 지원
- MCP 서버 생성 및 관리 체계
- API 연동을 통한 AI 확대 가능 구조

#### AAR-003: AI 운영 및 라이프사이클 관리
- **MLOps 체계**: 모델 버전 관리, 배포, 모니터링
- 모델 품질 관리 및 지속적 개선
- AI 모델 성능 지표 추적

---

## 4. 데이터 설계 요구사항 (DIT)

### 4.1 통합 데이터 구성 체계 (DIT-001)
- 기존 DW 중복 스키마 → 통합 모델 단일화
- 오브젝트 스토리지 기반 데이터레이크 환경 적합 설계
- 데이터 증가에 따른 성능 저하 최소화
- 파티셔닝, 파일 포맷, 집계/요약 데이터 설계
- 원천 데이터 영역 / 활용 데이터 영역 구분
- 영역별 표준/비표준 용어 정책 적용
- 비정형 데이터 구조화/정형화 대상 분석

### 4.2 목적 데이터 마트 생성 및 운영 (DIT-002)
- 유사 마트 생성 최소화
- 스키마 변경 효율적 처리
- 데이터 마트 연결 최적화
- 계층적 데이터 탐색 설계
- Dimension 관리 효율성
- 표준 지표 → 데이터 마트 → 카탈로그 서비스 연결

---

## 5. 데이터 이관 요구사항 (DMR)

### 5.1 데이터 이관 절차 및 수행 계획 (DMR-001)
- 시스템 Open 이전 3개월까지 이관 계획 완료
- 문제 발생 시 대응 방안 포함
- 전체/부분 이관 전략 병원 협의
- 비식별화 처리 등 선처리 일정 계획

### 5.2 이관 데이터 검증 및 성능 측정 (DMR-002)
- 이관 데이터 검증 방법/기준/범위 계획
- 가공/조회 성능 측정 및 조치 계획
- 비식별화 등 외부 API 사용 성능 측정

---

## 6. 비기능 요구사항

### 6.1 성능 요구사항 (PER)
- **PER-001**: 안정된 서비스 성능 확보
- **PER-002**: 느린 작업에 대한 사전 경고 시스템

### 6.2 보안 요구사항 (SER)
| ID | 요구사항 |
|-----|----------|
| SER-001 | 보안 관리 |
| SER-002 | 접근 통제 |
| SER-003 | 접속기록/모니터링 |
| SER-004 | 개발 보안 |
| SER-005 | 시스템 보안 |
| SER-006 | 운영 보안 |
| SER-007 | 로그 관리 |
| SER-008 | 데이터/문서 관리 |
| SER-009 | 물리 보안 |
| SER-010 | 개인정보보호 (개인정보보호법, 생명윤리법 준수) |

### 6.3 품질 요구사항 (QUR)
- **QUR-001**: 품질보증활동
- **QUR-002**: 기능 구현의 정확성
- **QUR-003**: 상호운용성 (데이터교환성)
- **QUR-004**: 개발절차 준수/검증
- **QUR-005**: 신뢰성/확장성

### 6.4 테스트 요구사항 (TER)
- **TER-001**: 테스트 계획 수립
- **TER-002**: 데이터 적재 결과 검증
- **TER-003**: 단위 테스트
- **TER-004**: 통합 테스트
- **TER-005**: 성능/부하 테스트
- **TER-006**: 검수
- **TER-007**: 결함 관리

---

## 7. 인프라 요구사항 (ECR)

### 7.1 H/W 구성
- 가상화 형태 구성 (서버 가상화 또는 HCI)
- 스토리지: 2PB (숏텀 300TB, 롱텀 1.7PB)
- 네트워크 스위치: 10GbE 이상, 이중화
- 하이브리드 T2 H/W (별도 안내)

### 7.2 개발/운영 환경
- 개발 언어/Framework: 병원 협의
- CI/CD 운영 (병원 CI/CD 우선, 배포 이력/롤백 관리)
- 형상 관리 (병원 협의 솔루션)
- API 기반 데이터 유통 체계
  - API 목록 서비스, 개발자 포털(테스트베드)
  - Multi-API Gateway (트래픽 제어, 인증, 정책 관리)
  - API 라이프사이클 자동화 및 통합 모니터링

### 7.3 확장 가능한 아키텍처
- 인프라 독립적 설계
- 산업 표준 프로토콜 지원 (JDBC, ODBC, REST, GraphQL, MDX)
- 표준 인증 프로토콜 지원 (OAuth 2.0, SAML)

---

## 8. 시스템 연동 요구사항

### 8.1 내부 시스템 연동
| 시스템 | 연동 내용 |
|--------|----------|
| CDM (Common Data Model) | 데이터 활용 시스템 통합 |
| PMS (정밀의료) | 데이터 활용 시스템 통합 |
| REDCap (e-CRF) | 데이터 활용 시스템 통합 |
| 표준 용어 메타 시스템 (엔코아) | 메타 데이터 연계 |
| IRB/DRB 시스템 | 심의 상태/내용 업무 데이터 연계 |
| AMIS 3.0 EAM | 역할 기반 권한 연계 |
| 아산웍스 | Alert 알림 연동 |

### 8.2 외부 시스템 연동
- 빅데이터 분석 지원 포털 연계
- 외부 연구 협력 데이터 개방

---

## 9. 제약사항 (COR)

- **COR-001**: 병원 보유 자원 활용
- **COR-002**: 소스코드 제공 필수
- **COR-003**: 일정지연 책임

---

## 10. 프로젝트 지원 요구사항 (PSR)

- **PSR-001**: 하자/유지관리 지원
- **PSR-002**: 교육/훈련 지원
- **PSR-003**: 매뉴얼 제공
- **PSR-004**: 안정화/복구 대응

---

## 11. 추진 일정

| 단계 | 기간 | 주요 활동 |
|------|------|----------|
| 요구사항/시스템 분석 | M ~ M+2 | 현행 시스템 분석, 요구사항 정의 |
| 설계 | M+2 ~ M+6 | 아키텍처 설계, 데이터 모델링 |
| 구현 | M+6 ~ M+12 | 개발, 데이터 이관 |
| 단위/통합 시험 | M+12 ~ M+16 | 테스트, 검증 |
| 안정화 지원 | M+16 ~ M+18 | 운영 안정화 |
| 보고회 | 착수, 중간, 최종 | 진행 상황 보고 |

---

## 12. 산출물 목록

| 분류 | 산출물 |
|------|--------|
| 분석/설계 | 목표 시스템 구성도, 데이터 구성 체계도, ERD |
| 데이터 | 데이터 이관 계획서, 데이터 검증 계획서, 데이터 취득 관리 지침서 |
| 거버넌스 | 데이터 표준 관리 지침, 품질관리 지침, 보안관리 지침, 권한관리 지침 |
| 복구 | 데이터 복구 계획서 |
| 플랫폼 | 분석 플랫폼, 데이터 포털 |
| 매뉴얼 | 사용자 매뉴얼, 운영자 매뉴얼 |

---

## 13. 용어 정의

| 용어 | 정의 |
|------|------|
| CDW | Clinical Data Warehouse - 임상 데이터 웨어하우스 |
| EDW | Enterprise Data Warehouse - 전사 데이터 웨어하우스 |
| MCP | Model Context Protocol - AI 모델 컨텍스트 프로토콜 |
| CDC | Change Data Capture - 변경 데이터 캡처 |
| RAG | Retrieval-Augmented Generation - 검색 증강 생성 |
| MLOps | Machine Learning Operations - ML 운영 체계 |
| FHIR | Fast Healthcare Interoperability Resources - 의료정보 상호운용성 표준 |
| IRB | Institutional Review Board - 임상연구심의위원회 |
| DRB | Data Review Board - 데이터심의위원회 |
| CDM | Common Data Model - 공통 데이터 모델 |

---

**문서 끝**
