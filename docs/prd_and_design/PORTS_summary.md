# 프로젝트 포트 사용 현황

이 문서는 서울아산병원 통합 데이터 플랫폼(IDP) 프로젝트에서 사용되는 주요 서비스 및 애플리케이션의 네트워크 포트 정보를 정리합니다.

## 1. Docker Compose 서비스 포트

`docker-compose.yml` 파일에 정의된 서비스별 포트 매핑은 다음과 같습니다. 호스트 머신에서 접근 가능한 외부 포트를 기준으로 작성되었습니다.

| 서비스 이름 | 내부 컨테이너 포트 | 호스트 포트 | 설명 |
| :---------- | :----------------- | :---------- | :------------------------------------------- |
| `portal`    | `80`               | `18000`     | 메인 데이터 포털 웹 UI (Nginx)              |
| `api`       | `8000`             | `8000`      | 백엔드 API 서버 (FastAPI)                   |
| `postgres`  | `5432`             | `15432`     | PostgreSQL 데이터베이스                     |
| `redis`     | `6379`             | `16379`     | Redis 캐시 및 메시지 브로커                 |
| `qdrant`    | `6333`, `6334`     | `16333`, `16334` | Qdrant 벡터 데이터베이스 (gRPC, HTTP)        |
| `airflow-webserver` | `8080`     | `18080`     | Apache Airflow 웹 UI                        |
| `mlflow`    | `5000`             | `5000`      | MLflow 트래킹 서버 (ML 모델 관리)           |
| `jupyterlab` | `8888`            | `18888`     | JupyterLab 분석 환경                        |
| `superset`  | `8088`             | `18088`     | Apache Superset BI 대시보드                |

## 2. 프론트엔드 개발 서버 포트

프론트엔드 개발 환경에서 사용되는 포트입니다.

| 서비스 이름 | 포트  | 설명                                       |
| :---------- | :---- | :----------------------------------------- |
| Vite 개발 서버 | `3000` | `src/portal` 애플리케이션 개발 시 사용 |

## 3. 백엔드 API 내부 통신 포트

`api` 서비스 컨테이너 내부에서 다른 서비스와 통신하는 데 사용되는 포트입니다. 이 포트들은 일반적으로 호스트 머신에 직접 노출되지 않습니다.

| 서비스 이름 | 포트 | 설명                                       |
| :---------- | :--- | :----------------------------------------- |
| `postgres`  | `5432` | `api` 서비스에서 `postgres` 컨테이너 접근 |
| `redis`     | `6379` | `api` 서비스에서 `redis` 컨테이너 접근    |
| `qdrant`    | `6333` | `api` 서비스에서 `qdrant` 컨테이너 접근   |

## 4. 기타 연동 서비스 포트 (예시)

LLM, 임베딩 모델 등 외부 또는 내부망에서 연동될 수 있는 서비스의 포트 예시입니다. 이들은 `api` 서비스의 환경 변수에 의해 설정됩니다.

| 환경 변수           | 기본값 (예시)              | 설명                                 |
| :------------------ | :------------------------- | :----------------------------------- |
| `LLM_API_URL`       | `http://host.docker.internal:8888/v1` | LLM API 서버 엔드포인트          |
| `EMBEDDING_API_URL` | `http://host.docker.internal:8082`    | 임베딩 모델 API 서버 엔드포인트  |

---

**참고**: `host.docker.internal`은 Docker 컨테이너 내부에서 호스트 머신에 접근할 수 있도록 해주는 특별한 DNS 이름입니다. 개발 환경에서 LLM이나 임베딩 모델이 호스트 머신에 직접 실행될 때 유용합니다.
